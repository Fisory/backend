import Dysmsapi, * as dysmsapi from '@alicloud/dysmsapi20170525';import * as OpenApi from '@alicloud/openapi-client';import { aliyunSmsConfig } from '@/config/aliyun';const createSmsClient = (): Dysmsapi => {  const config = new OpenApi.Config({    accessKeyId: aliyunSmsConfig.accessKeyId,    accessKeySecret: aliyunSmsConfig.accessKeySecret,  });  config.endpoint = 'dysmsapi.aliyuncs.com';  return new Dysmsapi(config);};const smsClient = createSmsClient();export const sendLoginVerifyCode = async (  phoneNumber: string,  code: string): Promise<boolean> => {  try {    const sendSmsRequest = new dysmsapi.SendSmsRequest({      phoneNumbers: phoneNumber,      signName: aliyunSmsConfig.signName,      templateCode: aliyunSmsConfig.templateCode,      templateParam: JSON.stringify({ code }),    });    const response = await smsClient.sendSms(sendSmsRequest);    if (response.body.code === 'OK') {      console.log('âœ… çŸ­ä¿¡å‘é€æˆåŠŸ', {        phone: phoneNumber,        requestId: response.body.requestId,         bizId: response.body.bizId,               });      return true;    } else {      console.error('âŒ çŸ­ä¿¡å‘é€å¤±è´¥', {        phone: phoneNumber,        code: response.body.code,        message: response.body.message,      });      if (response.body.code === 'isv.BUSINESS_LIMIT_CONTROL') {        console.error('ðŸ’¡ æç¤º: çŸ­ä¿¡å‘é€é¢‘çŽ‡è¶…é™ï¼Œè¯·ç¨åŽå†è¯•');      } else if (response.body.code === 'isv.MOBILE_NUMBER_ILLEGAL') {        console.error('ðŸ’¡ æç¤º: æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®');      }      return false;    }  } catch (error) {    console.error('âŒ çŸ­ä¿¡å‘é€å¼‚å¸¸:', error);    return false;  }};export const validatePhoneNumber = (phoneNumber: string): boolean => {  const phoneRegex = /^1[3-9]\d{9}$/;  return phoneRegex.test(phoneNumber);};export const generateVerifyCode = (length: number = 6): string => {  const max = Math.pow(10, length);  const code = Math.floor(Math.random() * max);  return code.toString().padStart(length, '0');};
